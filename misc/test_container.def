Bootstrap: docker
From: ubutunu: 18.04.3

%files 
    requirements.txt

%post
    apt-get update && apt-get -y upgrade
    apt-get install curl
    apt-get install -y g++
    apt-get install -y x11-apps
    curl https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -o Miniconda3-latest-Linux-x86_64.sh
    /bin/bash Miniconda3-latest-Linux-x86_64.sh -b
    conda init bash
    conda config --file /.condarc --add channels defaults
    conda config --file /.condarc --add channels conda-forge
    conda update conda
    conda create --name hls4ml python=3.8.18
    conda activate hls4ml
    pip install --upgrade pip
    pip install -r requirements.txt
    
